const input=document.querySelector("input"),button=document.querySelector("button"),result=document.querySelector("#weather"),city=result.querySelector("#city"),temp=result.querySelector("#temp-value"),conditions=result.querySelector("#conditions"),weatherIcon=result.querySelector("#weather-icon"),flag=result.querySelector("#country"),humidity=result.querySelector("#humidity span"),wind=result.querySelector("#wind span"),error=document.querySelector("#error"),apiKey="06e17fa7454dd6abc133d6d160ed293b",getWeatherData=async e=>{const t=await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${e}&appid=${apiKey}&units=metric`);return await t.json()},showWeather=async e=>{try{const t=await getWeatherData(e);city.innerHTML=t.name,country.src=`https://countryflagsapi.com/svg/${t.sys.country}`,temp.innerHTML=t.main.temp.toFixed(1),conditions.innerHTML=t.weather[0].description,humidity.innerHTML=`${t.main.humidity} %`,wind.innerHTML=`${Math.trunc(3.6*t.wind.speed)} km/h`,weatherIcon.src=`https://openweathermap.org/img/w/${t.weather[0].icon}.png`,result.classList.remove("hidden"),input.value=""}catch(e){error.innerHTML="This city does not exist",error.classList.remove("hidden"),result.classList.add("hidden"),setTimeout((()=>error.classList.add("hidden")),3e3)}};button.addEventListener("click",(()=>showWeather(input.value))),input.addEventListener("keyup",(e=>"Enter"===e.key?showWeather(input.value):null));